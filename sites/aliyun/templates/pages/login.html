{% extends "layouts/base.html" %}

{% block content %}
<main class="main-content" x-data="loginPage()">
    <div class="login-container">
        <div class="login-box">
            <h1>{{ config.site.title }}</h1>
            <p class="login-subtitle">{{ config.site.description }}</p>

            <div x-show="error" x-text="error" class="alert alert-error" x-cloak></div>

            <form @submit.prevent="login()" class="login-form">
                <div class="form-group">
                    <label for="name">名称 (可选):</label>
                    <input type="text" x-model="form.name" placeholder="例如: 生产环境">
                </div>
                <div class="form-group">
                    <label for="accessKeyId">AccessKey ID:</label>
                    <input type="text" x-model="form.accessKeyId" required placeholder="请输入 AccessKey ID">
                </div>
                <div class="form-group">
                    <label for="accessKeySecret">AccessKey Secret:</label>
                    <input type="password" x-model="form.accessKeySecret" required placeholder="请输入 AccessKey Secret">
                </div>
                <button type="submit" class="btn btn-primary btn-block" :disabled="loading">
                    <span x-show="!loading">登录</span>
                    <span x-show="loading" x-cloak>登录中...</span>
                </button>
            </form>
        </div>
    </div>
</main>
{% endblock %}

{% block extra_js %}
<script>
window.APP_CONFIG = {{ config|json|safe }};
</script>
<script src="{{ base_path }}/static/js/auth.js"></script>
<script src="{{ base_path }}/static/js/alpine-components.js"></script>
{% endblock %}
